(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{927:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),l=a(2115),r=a(9988);let n={Restaurant:"#FF6B6B","Tourist Attraction":"#4ECDC4",Hotel:"#45B7D1",Beach:"#F7DC6F",Museum:"#BB8FCE",Park:"#82E0AA",Shopping:"#F8C471",Entertainment:"#FF8A80",Transportation:"#90CAF9",Other:"#A0A0A0"},o={Restaurant:"\uD83C\uDF7D️","Tourist Attraction":"\uD83D\uDDFC",Hotel:"\uD83C\uDFE8",Beach:"\uD83C\uDFD6️",Museum:"\uD83C\uDFDB️",Park:"\uD83C\uDF33",Shopping:"\uD83D\uDECD️",Entertainment:"\uD83C\uDFAD",Transportation:"\uD83D\uDE8C",Other:"\uD83D\uDCCD"};function i(e){let{locations:t,selectedLocation:a,onDeselectLocation:i}=e,[c,d]=(0,l.useState)({lat:20,lng:0}),[u,x]=(0,l.useState)(2),[m,g]=(0,l.useState)(null),h=(0,r.ko)();(0,l.useEffect)(()=>{a&&(d({lat:a.lat,lng:a.lng}),x(12),g(a.id))},[a]);let p=(0,l.useCallback)(e=>{g(m===e.id?null:e.id),d({lat:e.lat,lng:e.lng}),x(Math.max(u,10))},[m,u]),b=(0,l.useCallback)(()=>{a&&i&&i()},[a,i]),f=e=>(0,s.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(t=>(0,s.jsx)("span",{className:"text-sm ".concat(t<=e?"text-yellow-400":"text-gray-300"),children:"★"},t))}),v=e=>{let{location:t}=e,l=n[t.category]||n.Other,r=o[t.category]||o.Other;return(0,s.jsxs)("div",{className:"relative cursor-pointer transform transition-transform hover:scale-110",onClick:()=>p(t),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full border-2 border-white shadow-lg flex items-center justify-center text-white font-bold",style:{backgroundColor:l},children:(0,s.jsx)("span",{className:"text-sm",children:r})}),(null==a?void 0:a.id)===t.id&&(0,s.jsx)("div",{className:"absolute -top-1 -left-1 w-10 h-10 rounded-full border-2 border-blue-500 animate-pulse"})]})},j=(0,l.useCallback)(()=>{if(!h||0===t.length)return;let e=new google.maps.LatLngBounds;t.forEach(t=>{e.extend(new google.maps.LatLng(t.lat,t.lng))}),h.fitBounds(e),1===t.length&&h.setZoom(12)},[h,t]);return(0,s.jsxs)("div",{className:"flex-grow h-full w-full",children:[(0,s.jsxs)(r.T5,{mapId:"travel_map",center:c,zoom:u,gestureHandling:"greedy",disableDefaultUI:!1,style:{width:"100%",height:"100%"},zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0,onDragend:b,onZoomChanged:b,children:[t.map(e=>(0,s.jsx)(r.J8,{position:e,title:e.name,children:(0,s.jsx)(v,{location:e})},e.id)),t.map(e=>m===e.id&&(0,s.jsx)(r.Fu,{position:e,onCloseClick:()=>g(null),children:(0,s.jsxs)("div",{className:"p-3 max-w-xs",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-2",children:e.name}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:e.category}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:e.dateVisited})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Rating:"}),f(e.rating)]}),e.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Notes:"}),(0,s.jsx)("p",{className:"text-sm text-gray-700",children:e.notes})]})]})]})},"info-".concat(e.id)))]}),(0,s.jsx)("div",{className:"absolute top-4 left-4 space-y-2",children:(0,s.jsx)("button",{onClick:j,className:"bg-white shadow-lg rounded-lg p-3 hover:bg-gray-50 transition-colors",title:"Fit all locations",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-5h-4m4 0v4m0-4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5h-4m4 0v-4m0 4l-5-5"})})})}),(0,s.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-lg p-3",children:[(0,s.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Categories"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:Object.entries(n).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a}}),(0,s.jsx)("span",{children:t})]},t)})})]}),(0,s.jsx)("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:[t.length," locations"]})})]})}let c=["Restaurant","Tourist Attraction","Hotel","Beach","Museum","Park","Shopping","Entertainment","Transportation","Other"];function d(e){let t,a,{onPlaceSelect:n}=e,o=(0,l.useRef)(null),[i,d]=(0,l.useState)(null),[u,x]=(0,l.useState)(!1),[m,g]=(0,l.useState)({category:"Other",notes:"",dateVisited:new Date().toISOString().split("T")[0],rating:3}),h=(0,r.ST)("places");return(0,l.useEffect)(()=>{if(!h||!o.current)return;let e=new h.Autocomplete(o.current,{fields:["name","geometry","formatted_address","types"]});e.addListener("place_changed",()=>{var t;let a=e.getPlace();(null==(t=a.geometry)?void 0:t.location)&&(d(a),x(!0),o.current&&(o.current.value=""))})},[h]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:o,type:"text",placeholder:"Search for a location...",className:"w-full p-3 border border-gray-300 rounded-lg text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),u&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add Location Details"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Location: ",null==i?void 0:i.name]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsx)("select",{value:m.category,onChange:e=>g({...m,category:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Visited"}),(0,s.jsx)("input",{type:"date",value:m.dateVisited,onChange:e=>g({...m,dateVisited:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating"}),(t=m.rating,a=e=>g({...m,rating:e}),(0,s.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>a(e),className:"text-lg ".concat(e<=t?"text-yellow-400":"text-gray-300"," hover:text-yellow-500 cursor-pointer transition-colors"),type:"button",children:"★"},e))}))]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,s.jsx)("textarea",{value:m.notes,onChange:e=>g({...m,notes:e.target.value}),placeholder:"Add any notes about this location...",className:"w-full p-2 border border-gray-300 rounded-lg h-24 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>{x(!1),d(null),g({category:"Other",notes:"",dateVisited:new Date().toISOString().split("T")[0],rating:3})},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{var e;(null==i||null==(e=i.geometry)?void 0:e.location)&&(n({name:i.name,lat:i.geometry.location.lat(),lng:i.geometry.location.lng(),category:m.category,notes:m.notes,dateVisited:m.dateVisited,rating:m.rating}),x(!1),d(null),g({category:"Other",notes:"",dateVisited:new Date().toISOString().split("T")[0],rating:3}))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Location"})]})]})})]})}function u(e){let{locations:t,onAddLocation:a,onUpdateLocation:r,onDeleteLocation:n,onSelectLocation:o,onExportLocations:i,onImportLocations:u}=e,[x,m]=(0,l.useState)("all"),[g,h]=(0,l.useState)("date"),[p,b]=(0,l.useState)(""),[f,v]=(0,l.useState)(null),j=(0,l.useRef)(null),y=t.filter(e=>{let t="all"===x||e.category===x,a=e.name.toLowerCase().includes(p.toLowerCase())||e.notes.toLowerCase().includes(p.toLowerCase());return t&&a}).sort((e,t)=>{switch(g){case"name":return e.name.localeCompare(t.name);case"date":return new Date(t.dateVisited).getTime()-new Date(e.dateVisited).getTime();case"rating":return t.rating-e.rating;case"category":return e.category.localeCompare(t.category);default:return 0}}),N=(e,t,a)=>{r(e.id,{[t]:a})},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;return(0,s.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(l=>(0,s.jsx)("button",{onClick:()=>t&&(null==a?void 0:a(l)),className:"text-sm ".concat(l<=e?"text-yellow-400":"text-gray-300"," ").concat(t?"hover:text-yellow-500 cursor-pointer":""),disabled:!t,children:"★"},l))})};return(0,s.jsxs)("div",{className:"w-[400px] bg-white border-r border-gray-200 flex flex-col shadow-xl",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Travel Map"}),(0,s.jsxs)("p",{className:"text-blue-100 mt-1",children:[t.length," locations visited"]})]}),(0,s.jsx)("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:(0,s.jsx)(d,{onPlaceSelect:a})}),(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-gray-50 space-y-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"text",placeholder:"Search locations...",value:p,onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:g,onChange:e=>h(e.target.value),className:"flex-1 p-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"date",children:"Sort by Date"}),(0,s.jsx)("option",{value:"name",children:"Sort by Name"}),(0,s.jsx)("option",{value:"rating",children:"Sort by Rating"}),(0,s.jsx)("option",{value:"category",children:"Sort by Category"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:i,className:"flex-1 bg-green-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-green-600 transition-colors",children:"Export"}),(0,s.jsx)("button",{onClick:()=>{var e;return null==(e=j.current)?void 0:e.click()},className:"flex-1 bg-blue-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors",children:"Import"}),(0,s.jsx)("input",{ref:j,type:"file",accept:".json",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&(u(a),e.target.value="")},className:"hidden"})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===y.length?(0,s.jsx)("div",{className:"p-6 text-center text-gray-500",children:0===t.length?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-medium",children:"No locations yet"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Search for a location above to get started!"})]}):(0,s.jsx)("p",{children:"No locations match your current filters"})}):(0,s.jsx)("ul",{className:"divide-y divide-gray-200",children:y.map(e=>(0,s.jsx)("li",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("button",{onClick:()=>o(e),className:"text-left font-medium text-gray-900 hover:text-blue-600 transition-colors truncate",children:e.name}),(0,s.jsx)("button",{onClick:()=>v(f===e.id?null:e.id),className:"text-gray-400 hover:text-gray-600 p-1",children:f===e.id?"✓":"✎"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:e.category}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:e.dateVisited})]}),f===e.id?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("select",{value:e.category,onChange:t=>N(e,"category",t.target.value),className:"w-full p-2 border border-gray-300 rounded text-sm",children:c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("input",{type:"date",value:e.dateVisited,onChange:t=>N(e,"dateVisited",t.target.value),className:"w-full p-2 border border-gray-300 rounded text-sm"}),(0,s.jsx)("textarea",{value:e.notes,onChange:t=>N(e,"notes",t.target.value),placeholder:"Add notes...",className:"w-full p-2 border border-gray-300 rounded text-sm h-20 resize-none"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Rating:"}),w(e.rating,!0,t=>N(e,"rating",t))]})]}):(0,s.jsxs)("div",{className:"space-y-1",children:[e.notes&&(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.notes}),w(e.rating)]})]})]}),(0,s.jsx)("button",{onClick:()=>n(e.id),className:"ml-3 text-red-500 hover:text-red-700 p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDDD1️"})]})},e.id))})})]})}var x=a(9509);let m="visited_locations";function g(){let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(null),[o,c]=(0,l.useState)(!0),[d,g]=(0,l.useState)(null);return((0,l.useEffect)(()=>{try{let e=localStorage.getItem(m);if(e){let a=JSON.parse(e).map((e,t)=>({id:e.id||"location-".concat(t),name:e.name,lat:e.lat,lng:e.lng,category:e.category||"Other",notes:e.notes||"",dateVisited:e.dateVisited||new Date().toISOString().split("T")[0],rating:e.rating||3}));t(a)}}catch(e){g("Failed to load saved locations"),console.error("Error loading locations:",e)}finally{c(!1)}},[]),(0,l.useEffect)(()=>{if(!o)try{localStorage.setItem(m,JSON.stringify(e))}catch(e){g("Failed to save locations"),console.error("Error saving locations:",e)}},[e,o]),o)?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading your travel map..."})]})}):(0,s.jsx)(r.c4,{apiKey:x.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY,children:(0,s.jsxs)("div",{className:"flex h-screen font-sans bg-gray-50",children:[d&&(0,s.jsxs)("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",children:[d,(0,s.jsx)("button",{onClick:()=>g(null),className:"ml-2 hover:bg-red-600 px-2 py-1 rounded",children:"\xd7"})]}),(0,s.jsx)(u,{locations:e,onAddLocation:a=>{let s={...a,id:"location-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))};t([...e,s]),n(s)},onUpdateLocation:(a,s)=>{t(e.map(e=>e.id===a?{...e,...s}:e))},onDeleteLocation:s=>{t(e.filter(e=>e.id!==s)),(null==a?void 0:a.id)===s&&n(null)},onSelectLocation:n,onExportLocations:()=>{let t="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2)),a="travel-map-locations-".concat(new Date().toISOString().split("T")[0],".json"),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download",a),s.click()},onImportLocations:e=>{let a=new FileReader;a.onload=e=>{try{var a;let s=JSON.parse(null==(a=e.target)?void 0:a.result);Array.isArray(s)?(t(s),g(null)):g("Invalid file format")}catch(e){g("Failed to import locations"),console.error("Error importing locations:",e)}},a.readAsText(e)}}),(0,s.jsx)(i,{locations:e,selectedLocation:a,onDeselectLocation:()=>{n(null)}})]})})}},8318:(e,t,a)=>{Promise.resolve().then(a.bind(a,927))}},e=>{var t=t=>e(e.s=t);e.O(0,[988,441,684,358],()=>t(8318)),_N_E=e.O()}]);